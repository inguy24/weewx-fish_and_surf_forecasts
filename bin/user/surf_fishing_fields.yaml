# WeeWX Surf & Fishing Forecast Extension Configuration
# Phase II: Local Surf & Fishing Forecast System
# Data-driven configuration for install.py
#
# This file is read by install.py during installation to configure
# the extension. The service reads configuration from weewx.conf only.

# UPDATED: GFS Wave API Configuration (replaces deprecated WaveWatch III)
api_endpoints:
  gfs_wave:
    description: "NOAA GFS-Wave Model (WaveWatch III coupled with GFS)"
    base_url: "https://nomads.ncep.noaa.gov/pub/data/nccf/com/gfs/prod/"
    url_pattern: "gfs.{yyyymmdd}/{hh}/wave/gridded/"
    file_pattern: "gfswave.t{hh}z.{grid_name}.f{fff}.grib2"
    documentation: "https://polar.ncep.noaa.gov/waves/Model_Description.pdf"
    
    # Updated regional grids based on GFS Wave system
    grids:
      us_east_coast:
        description: "US East Coast & Gulf (16km resolution)"
        grid_name: "atlocn.0p16"
        bounds: [0, 55, -100, -50]  # 0-55N, 100W-50W
        resolution: 0.16  # degrees (~16km)
        update_frequency: "6_hours"
        coverage: "US East Coast, Gulf of Mexico, Western Atlantic"
        priority: 1
        
      us_west_coast:
        description: "US West Coast (16km resolution)" 
        grid_name: "wcoast.0p16"
        bounds: [25, 50, -150, -110]  # 25-50N, 150W-110W
        resolution: 0.16  # degrees (~16km)
        update_frequency: "6_hours"
        coverage: "California, Oregon, Washington coasts"
        priority: 1
        
      hawaii_pacific:
        description: "Hawaii & Eastern Pacific (16km resolution)"
        grid_name: "epacif.0p16"
        bounds: [-20, 30, -180, -130]  # 20S-30N, 180W-130W
        resolution: 0.16  # degrees (~16km)
        update_frequency: "6_hours"
        coverage: "Hawaii, Eastern Pacific"
        priority: 1
        
      alaska_arctic:
        description: "Alaska & Arctic (9km resolution)"
        grid_name: "arctic.9km"
        bounds: [50, 90, -180, 180]  # 50-90N, global longitude
        resolution: 0.083  # degrees (~9km)
        update_frequency: "6_hours"
        coverage: "Alaska, Arctic Ocean"
        priority: 1
        
      global_primary:
        description: "Global mid-latitudes (16km resolution)"
        grid_name: "global.0p16"
        bounds: [-15, 52.5, -180, 180]  # 15S-52.5N, global
        resolution: 0.16  # degrees (~16km)
        update_frequency: "6_hours"
        coverage: "Global primary computational grid"
        priority: 2
        
      global_fallback:
        description: "Global interpolated (25km resolution)"
        grid_name: "global.0p25"
        bounds: [-90, 90, -180, 180]  # Global coverage
        resolution: 0.25  # degrees (~25km)
        update_frequency: "6_hours"
        coverage: "Global fallback grid"
        priority: 3
        
      southern_ocean:
        description: "Southern Ocean (25km resolution)"
        grid_name: "gsouth.0p25"
        bounds: [-79.5, -10.5, -180, 180]  # 79.5S-10.5S, global
        resolution: 0.25  # degrees (~25km)
        update_frequency: "6_hours"
        coverage: "Southern Ocean, Antarctica"
        priority: 2
    
    # Schedule configuration
    schedule:
      run_cycles: ["00", "06", "12", "18"]
      update_frequency: "6_hours"
      forecast_hours: [0, 3, 6, 9, 12, 15, 18, 21, 24, 27, 30, 33, 36, 42, 48, 54, 60, 66, 72]
      data_availability_delay: "4.5_hours"  # Model available ~4.5 hours after run time
    
    # Wave parameters to extract from GRIB2 files
    parameters:
      # Essential parameters (HIGH priority)
      - name: "Significant height of combined wind waves and swell"
        field: "wave_height"
        units: "meters"
        conversion_factor: 3.28084  # Convert to feet
        grib_parameter: "HTSGW"
        priority: "HIGH"
        
      - name: "Mean period of combined wind waves and swell"
        field: "wave_period"
        units: "seconds"
        grib_parameter: "PERPW"
        priority: "HIGH"
        
      - name: "Direction of combined wind waves and swell"
        field: "wave_direction"
        units: "degrees"
        grib_parameter: "DIRPW"
        priority: "HIGH"
        
      - name: "Wind speed"
        field: "wind_speed"
        units: "m/s"
        conversion_factor: 2.23694  # Convert to mph
        grib_parameter: "WIND"
        priority: "HIGH"
        
      - name: "Wind direction"
        field: "wind_direction"
        units: "degrees"
        grib_parameter: "WDIR"
        priority: "HIGH"
        
      # Swell components (HIGH priority for surf forecasting)
      - name: "Significant wave height of first swell partition"
        field: "swell_1_height"
        units: "meters"
        conversion_factor: 3.28084  # Convert to feet
        grib_parameter: "SWELL:1"
        priority: "HIGH"
        
      - name: "Mean wave period of first swell partition"
        field: "swell_1_period"
        units: "seconds"
        grib_parameter: "SWPER:1"
        priority: "HIGH"
        
      - name: "Mean wave direction of first swell partition"
        field: "swell_1_direction"
        units: "degrees"
        grib_parameter: "SWDIR:1"
        priority: "HIGH"
        
      # Wind wave components (MEDIUM priority)
      - name: "Significant height of wind waves"
        field: "wind_wave_height"
        units: "meters"
        conversion_factor: 3.28084  # Convert to feet
        grib_parameter: "WVHGT"
        priority: "MEDIUM"
        
      - name: "Mean period of wind waves"
        field: "wind_wave_period"
        units: "seconds"
        grib_parameter: "WVPER"
        priority: "MEDIUM"
        
      - name: "Direction of wind waves"
        field: "wind_wave_direction"
        units: "degrees"
        grib_parameter: "WVDIR"
        priority: "MEDIUM"
        
      # Secondary swell components (MEDIUM priority)
      - name: "Significant wave height of second swell partition"
        field: "swell_2_height"
        units: "meters"
        conversion_factor: 3.28084  # Convert to feet
        grib_parameter: "SWELL:2"
        priority: "MEDIUM"
        
      - name: "Mean wave period of second swell partition"
        field: "swell_2_period"
        units: "seconds"
        grib_parameter: "SWPER:2"
        priority: "MEDIUM"
        
      - name: "Mean wave direction of second swell partition"
        field: "swell_2_direction"
        units: "degrees"
        grib_parameter: "SWDIR:2"
        priority: "MEDIUM"

# Grid selection logic for location-based queries
grid_selection:
  method: "geographic_priority"
  fallback_enabled: true
  
  regional_mappings:
    us_east_coast:
      bounds: [24.0, 50.0, -95.0, -65.0]
      primary_grid: "atlocn.0p16"
      backup_grid: "global.0p16"
      
    us_west_coast:
      bounds: [24.0, 50.0, -130.0, -95.0]
      primary_grid: "wcoast.0p16"
      backup_grid: "global.0p16"
      
    us_gulf_coast:
      bounds: [24.0, 32.0, -100.0, -80.0]
      primary_grid: "atlocn.0p16"
      backup_grid: "global.0p16"
      
    great_lakes:
      bounds: [41.0, 49.0, -93.0, -76.0]
      primary_grid: "global.0p16"
      backup_grid: "global.0p25"
      
    alaska:
      bounds: [55.0, 72.0, -180.0, -130.0]
      primary_grid: "arctic.9km"
      backup_grid: "global.0p16"
      
    hawaii:
      bounds: [18.0, 23.0, -162.0, -154.0]
      primary_grid: "epacif.0p16"
      backup_grid: "global.0p16"

# PRESERVED: Data Source Methods (keep existing)
data_source_methods:
  noaa_only:
    display_name: "NOAA APIs Only"
    description: "Use NDBC, CO-OPS, and GFS Wave data"
    sensors:
      wind: false
      pressure: false
      temperature: false
    advantages:
      - "Most comprehensive offshore data"
      - "Proven API reliability"
      - "No local sensor requirements"
    requirements:
      - "Internet connection only"
    
  station_supplement:
    display_name: "Station Supplement"
    description: "Supplement NOAA data with station sensors"
    sensors:
      wind: true
      pressure: true
      temperature: true
    advantages:
      - "Enhanced local accuracy"
      - "Fill coverage gaps"
      - "Cross-validation capability"
    requirements:
      - "Internet connection"
      - "Local weather station"
    
  hybrid_integration:
    display_name: "Hybrid Integration"
    description: "Intelligent fusion of marine and local data"
    sensors:
      wind: true
      pressure: true
      temperature: true
    advantages:
      - "Best possible accuracy"
      - "Redundant data sources"
      - "Advanced quality control"
    requirements:
      - "Internet connection"
      - "Multiple data sources"

# PRESERVED: Quality Control Parameters
quality_control:
  max_data_age_hours: 6        # Operational requirement for fresh data
  pressure_variance_threshold: 5.0  # hPa - flag if stations disagree more
  consistency_check_required: true

# PRESERVED: Coverage Thresholds for Field Adequacy Assessment
coverage_thresholds:
  critical_field_coverage: 1.0      # Must have ALL critical fields
  recommended_field_coverage: 0.75  # Should have 75%+ of recommended
  minimum_overall_coverage: 0.8     # 80% of total required fields

# PRESERVED: Field Priority Rankings for Recommendations
field_priorities:
  surf_priority:
    1: wave_height
    2: wave_period  
    3: wind_speed
    4: wind_direction
    5: wave_direction
  
  fishing_priority:
    1: barometric_pressure
    2: tide_predictions
    3: current_water_level
    4: wind_speed
    5: sea_surface_temp

# PRESERVED: Required Fields for Surf & Fishing Forecasting
required_fields:
  surf_forecasting:
    critical:
      - wave_height              # Primary surf indicator
      - wave_period               # Wave quality determination
      - wind_speed                # Surface conditions
      - wind_direction            # Onshore/offshore assessment
    
    recommended:
      - wave_direction            # Swell direction for spot-specific forecasts
      - swell_1_height            # Primary swell component
      - swell_1_period            # Primary swell period
      - swell_1_direction         # Primary swell direction
      - sea_surface_temp          # Seasonal surf quality factors
      - barometric_pressure       # Weather pattern stability
      - current_water_level       # Beach access, rip current assessment

  fishing_forecasting:
    critical:
      - barometric_pressure       # Primary fishing activity indicator
      - current_water_level       # Real-time tide information
      - tide_predictions          # Future fishing time planning
    
    recommended:
      - wind_speed               # Surface conditions affect fishing
      - wind_direction           # Fishing spot accessibility
      - sea_surface_temp         # Species activity indicator
      - coastal_water_temp       # Seasonal fishing patterns

# PRESERVED: Fish Categories for Forecasting
fish_categories:
  freshwater_sport:
    display_name: "Freshwater Sport Fish"
    species: ["Bass", "Trout", "Pike", "Walleye"]
    pressure_preference: "falling"
    tide_relevance: false
    
  saltwater_inshore:
    display_name: "Saltwater Inshore"
    species: ["Redfish", "Snook", "Flounder", "Spotted Sea Trout"]
    pressure_preference: "stable_high"
    tide_relevance: true
    
  saltwater_offshore:
    display_name: "Saltwater Offshore"
    species: ["Mahi", "Tuna", "Marlin", "Wahoo"]
    pressure_preference: "stable"
    tide_relevance: false
    
  bottom_fish:
    display_name: "Bottom Fish"
    species: ["Grouper", "Snapper", "Halibut", "Cod"]
    pressure_preference: "stable_high"
    tide_relevance: true

# PRESERVED: Surf Quality Scoring Parameters
surf_scoring:
  wave_height_scoring:
    # Score multipliers based on wave height (feet)
    0-1: 0.1     # Flat conditions
    1-3: 0.6     # Small surf
    3-6: 1.0     # Good surf
    6-10: 0.9    # Large surf
    10-15: 0.7   # Very large
    15+: 0.3     # Dangerous conditions
    
  wave_period_scoring:
    # Score multipliers based on wave period (seconds)
    0-8: 0.3     # Wind swell (poor quality)
    8-12: 0.7    # Mixed swell
    12-16: 1.0   # Good ground swell
    16-20: 0.9   # Very long period
    20+: 0.8     # Extremely long period
    
  wind_scoring:
    # Wind direction relative to surf spot orientation
    offshore: 1.0      # Clean conditions
    cross_shore: 0.6   # Manageable
    onshore: 0.2       # Poor conditions
    
  wind_speed_scoring:
    # Score multipliers based on wind speed (mph)
    0-5: 1.0     # Glassy conditions
    5-10: 0.9    # Light offshore
    10-15: 0.7   # Moderate wind
    15-20: 0.4   # Strong wind
    20+: 0.1     # Dangerous conditions

# PRESERVED: Fishing Quality Scoring Parameters
fishing_scoring:
  pressure_trend_scoring:
    rising_fast: 0.3      # Fish shut down
    rising_slow: 0.7      # Decent fishing
    stable_high: 1.0      # Excellent conditions
    stable_low: 0.6       # Fair conditions
    falling_slow: 0.9     # Very good fishing
    falling_fast: 0.8     # Good before front
    
  tide_phase_scoring:
    # Relative to high/low tide timing
    incoming: 0.9         # Fish feeding as water rises
    high_slack: 0.6       # Slower fishing at high tide
    outgoing: 1.0         # Peak fishing as tide drops
    low_slack: 0.4        # Typically slower fishing
    
  time_of_day_scoring:
    # Based on typical fish feeding patterns
    dawn: 1.0            # Prime feeding time
    morning: 0.8         # Good fishing
    midday: 0.4          # Typically slower
    afternoon: 0.6       # Moderate fishing
    dusk: 1.0            # Prime feeding time
    night: 0.7           # Species dependent

# PRESERVED: Multi-Source Data Fusion Parameters
fusion_parameters:
  atmospheric_fusion:
    distance_weight_enabled: true
    quality_confidence_enabled: true
    temporal_consistency_check: true
    
    weights:
      primary_source: 0.6
      secondary_source: 0.3
      tertiary_source: 0.1
      
    confidence_factors:
      single_source: 0.7
      two_sources: 0.9
      three_plus_sources: 1.0

# PRESERVED: Station Distance Analysis Parameters
distance_analysis:
  wave_data_distance_quality:
    excellent: [0, 25]      # 0-25 miles: excellent correlation
    good: [25, 50]          # 25-50 miles: good correlation
    fair: [50, 100]         # 50-100 miles: fair correlation
    poor: [100, 999]        # 100+ miles: poor correlation
    
  atmospheric_data_distance_quality:
    excellent: [0, 50]      # 0-50 miles: excellent correlation
    good: [50, 100]         # 50-100 miles: good correlation
    fair: [100, 200]        # 100-200 miles: fair correlation
    poor: [200, 999]        # 200+ miles: poor correlation
    
  local_station_value:
    extremely_valuable: [0, 1]    # 0-1 mile: local microclimate
    good_backup: [1, 5]           # 1-5 miles: good backup data
    pressure_trends_only: [5, 15] # 5-15 miles: pressure trends only

# PRESERVED: User Experience Configuration
user_experience:
  default_forecast_periods: 8      # Number of forecast periods to show
  forecast_interval_hours: 3       # Hours between forecast periods
  rating_system: "5_star"          # 1-5 star rating system
  condition_descriptions: true     # Include text descriptions
  confidence_indicators: true      # Show forecast confidence levels